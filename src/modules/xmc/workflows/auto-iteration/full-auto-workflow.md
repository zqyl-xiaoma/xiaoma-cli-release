# å…¨è‡ªåŠ¨è¿­ä»£å¼€å‘å·¥ä½œæµ

> **å·¥ä½œæµ ID**: auto-iterate
> **è§¦å‘å‘½ä»¤**: `*auto-iterate`
> **æ™ºèƒ½ä½“**: Phoenix (å…¨è‡ªåŠ¨åŒ–è¿­ä»£å¼€å‘ç¼–æ’å™¨)

---

## çŸ¥è¯†åº“é›†æˆ

### çŸ¥è¯†åº“é…ç½®

```yaml
knowledge_base:
  # å½“å‰æ¨¡å¼: rag (å‰æœŸ) | mcp (åæœŸ)
  mode: "rag"

  # RAG æ¨¡å¼é…ç½®
  rag:
    file_path: "{project-root}/docs/rag/rag.md"

  # MCP æ¨¡å¼é…ç½® (æœªæ¥)
  mcp:
    server: "knowledge-base-mcp"
    endpoint: "mcp__kb__query"
```

### çŸ¥è¯†åº“è°ƒç”¨æœºåˆ¶

åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä»¥ä¸‹åœºæ™¯æ—¶ä¼šè‡ªåŠ¨æŸ¥è¯¢çŸ¥è¯†åº“ï¼š

| é˜¶æ®µ | è°ƒç”¨åœºæ™¯ | æŸ¥è¯¢ç±»å‹ |
|-----|---------|---------|
| Phase 1 | é‡åˆ°ä¸šåŠ¡æœ¯è¯­ | ä¸šåŠ¡ |
| Phase 1 | è¯†åˆ«åŠŸèƒ½éœ€æ±‚æ—¶éªŒè¯ä¸šåŠ¡è§„åˆ™ | ä¸šåŠ¡ |
| Phase 1 | åˆ†æä¸šåŠ¡æµç¨‹ | ä¸šåŠ¡ |
| Phase 2 | åˆ›å»ºç”¨æˆ·æ•…äº‹æ—¶æŸ¥è¯¢è§’è‰²å®šä¹‰ | ä¸šåŠ¡ |
| Phase 2 | å®šä¹‰éªŒæ”¶æ ‡å‡†æ—¶æŸ¥è¯¢å‚è€ƒæ¨¡æ¿ | ä¸šåŠ¡+æŠ€æœ¯ |
| Phase 2 | å®šä¹‰NFRæ—¶æŸ¥è¯¢æ ‡å‡† | æŠ€æœ¯ |
| Phase 3 | æŠ€æœ¯é€‰å‹æ—¶æŸ¥è¯¢è§„èŒƒ | æŠ€æœ¯ |
| Phase 3 | æ¶æ„è®¾è®¡æ—¶æŸ¥è¯¢æ¨¡å¼ | æŠ€æœ¯ |
| Phase 3 | APIè®¾è®¡æ—¶æŸ¥è¯¢è§„èŒƒ | æŠ€æœ¯ |
| Phase 4 | ç¼–å†™ä»£ç æ—¶æŸ¥è¯¢ç¼–ç è§„èŒƒ | æŠ€æœ¯ |
| Phase 4 | å®ç°ä¸šåŠ¡é€»è¾‘æ—¶æŸ¥è¯¢è§„åˆ™ | ä¸šåŠ¡ |
| Phase 4 | ç¼–å†™æµ‹è¯•æ—¶æŸ¥è¯¢æµ‹è¯•è§„èŒƒ | æŠ€æœ¯ |
| Phase 5 | éªŒè¯è¦†ç›–ç‡æ—¶æŸ¥è¯¢è¦æ±‚ | æŠ€æœ¯ |
| Phase 5 | è´¨é‡é—¨ç¦æ£€æŸ¥æ—¶æŸ¥è¯¢æ ‡å‡† | æŠ€æœ¯ |

**è¯¦ç»†è°ƒç”¨ç‚¹å®šä¹‰**: å‚è§ `knowledge-base/kb-call-points.md`

---

## å·¥ä½œæµæ¦‚è¿°

æœ¬å·¥ä½œæµå®ç°ä»éœ€æ±‚æ–‡æ¡£åˆ°ä»£ç å®ç°çš„å…¨è‡ªåŠ¨åŒ–æ‰§è¡Œï¼Œèåˆ7å¤§æ™ºèƒ½ä½“èƒ½åŠ›ï¼Œé€šè¿‡çŸ¥è¯†åº“é©±åŠ¨æ‰€æœ‰å†³ç­–ï¼Œå®ç°é›¶äººå·¥å¹²é¢„çš„ç«¯åˆ°ç«¯å¼€å‘ã€‚

### æ™ºèƒ½ä½“å·¥ä½œæµé›†æˆæ±‡æ€»

> **é‡è¦**: æœ¬å·¥ä½œæµä¸¥æ ¼éµå¾ªé¡¹ç›®ç°æœ‰æ™ºèƒ½ä½“çš„æ ‡å‡†å·¥ä½œæµï¼Œç¡®ä¿å®Œå…¨å…¼å®¹ã€‚

| é˜¶æ®µ | é›†æˆæ™ºèƒ½ä½“ | è°ƒç”¨çš„å·¥ä½œæµ | ç”¨é€” |
|------|-----------|-------------|------|
| Phase 1 | Mary (Analyst) | å†…ç½®åˆ†æèƒ½åŠ› | éœ€æ±‚åˆ†æã€ä¸šåŠ¡è§„åˆ™åŒ¹é… |
| Phase 2 | John (PM) | å†…ç½® PRD èƒ½åŠ› | PRD åˆ›å»ºã€å²è¯—æ•…äº‹å®šä¹‰ |
| Phase 3 | Winston (Architect) | å†…ç½®æ¶æ„èƒ½åŠ› | æ¶æ„è®¾è®¡ã€æŠ€æœ¯å†³ç­– |
| Phase 4 | Bob (SM) | `*sprint-planning` | ç”Ÿæˆ sprint-status.yaml |
| Phase 4 | Bob (SM) | `*create-story` | åˆ›å»ºæ•…äº‹æ–‡ä»¶ (backlogâ†’draftedâ†’ready-for-dev) |
| Phase 4 | Amelia (DEV) | `*develop-story` | TDD å¼€å‘ (ready-for-devâ†’in-progressâ†’review) |
| Phase 4 | Amelia (DEV) | `*code-review` | ä»£ç å®¡æŸ¥ (reviewâ†’done) |
| Phase 5 | Murat (TEA) | `*trace` | éœ€æ±‚åˆ°æµ‹è¯•è¿½è¸ª |
| Phase 5 | Murat (TEA) | `*test-review` | æµ‹è¯•è´¨é‡è¯„å®¡ |
| Phase 5 | Murat (TEA) | `*nfr-assess` | NFR éªŒè¯ |

### æ•…äº‹çŠ¶æ€ç³»ç»Ÿ (6çŠ¶æ€æµè½¬)

```
backlog â†’ drafted â†’ ready-for-dev â†’ in-progress â†’ review â†’ done
   â”‚         â”‚            â”‚              â”‚           â”‚       â”‚
   â”‚         â”‚            â”‚              â”‚           â”‚       â””â”€ æ•…äº‹å®Œæˆ
   â”‚         â”‚            â”‚              â”‚           â””â”€ ç­‰å¾…ä»£ç å®¡æŸ¥
   â”‚         â”‚            â”‚              â””â”€ å¼€å‘è¿›è¡Œä¸­
   â”‚         â”‚            â””â”€ å¯ä»¥å¼€å§‹å¼€å‘
   â”‚         â””â”€ æ•…äº‹æ–‡ä»¶å·²åˆ›å»º
   â””â”€ ä»…å­˜åœ¨äº Epic æ–‡ä»¶ä¸­
```

**çŠ¶æ€è½¬æ¢è§¦å‘ç‚¹**:
- `backlog â†’ drafted`: SM `*create-story` åˆ›å»ºæ•…äº‹æ–‡ä»¶
- `drafted â†’ ready-for-dev`: SM `*create-story` æˆ– `*validate-create-story` éªŒè¯é€šè¿‡
- `ready-for-dev â†’ in-progress`: DEV `*develop-story` Step 4
- `in-progress â†’ review`: DEV `*develop-story` Step 9
- `review â†’ done`: DEV `*code-review` APPROVED
- `review â†’ in-progress`: DEV `*code-review` CHANGES_REQUESTED (è¿”å›ä¿®å¤)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å…¨è‡ªåŠ¨è¿­ä»£å¼€å‘æµç¨‹                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å…¥                                                                    â”‚
â”‚  â”œâ”€ ğŸ“„ è¿­ä»£éœ€æ±‚æ–‡æ¡£ï¼ˆäº§å“ç»ç†æä¾›ï¼‰                                        â”‚
â”‚  â”œâ”€ ğŸ“š ä¸šåŠ¡çŸ¥è¯†åº“ï¼ˆä¸šåŠ¡è§„åˆ™ã€é¢†åŸŸçŸ¥è¯†ï¼‰                                     â”‚
â”‚  â””â”€ ğŸ”§ æŠ€æœ¯çŸ¥è¯†åº“ï¼ˆæŠ€æœ¯è§„èŒƒã€ä»£ç è§„èŒƒã€æ¶æ„æ¨¡å¼ï¼‰                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 1: éœ€æ±‚åˆ†æ [Analyst èƒ½åŠ›]                                        â”‚
â”‚  â”œâ”€ è§£æéœ€æ±‚æ–‡æ¡£                                                         â”‚
â”‚  â”œâ”€ åŒ¹é…ä¸šåŠ¡çŸ¥è¯†åº“è§„åˆ™                                                    â”‚
â”‚  â”œâ”€ è¯†åˆ«éšå«éœ€æ±‚å’Œçº¦æŸ                                                    â”‚
â”‚  â””â”€ è¾“å‡º: ç»“æ„åŒ–éœ€æ±‚åˆ†ææŠ¥å‘Š                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 2: éœ€æ±‚è§„åˆ’ [PM + PO èƒ½åŠ›]                                        â”‚
â”‚  â”œâ”€ åˆ›å»º PRD æ–‡æ¡£                                                        â”‚
â”‚  â”œâ”€ å®šä¹‰åŠŸèƒ½éœ€æ±‚ (FRs)                                                   â”‚
â”‚  â”œâ”€ å®šä¹‰éåŠŸèƒ½éœ€æ±‚ (NFRs)                                                â”‚
â”‚  â”œâ”€ åˆ›å»ºå²è¯—å’Œç”¨æˆ·æ•…äº‹                                                    â”‚
â”‚  â””â”€ è¾“å‡º: PRD + Epic + Stories                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 3: æ¶æ„è®¾è®¡ [Architect èƒ½åŠ›]                                      â”‚
â”‚  â”œâ”€ åˆ†æç°æœ‰ä»£ç æ¶æ„                                                      â”‚
â”‚  â”œâ”€ è®¾è®¡æŠ€æœ¯æ–¹æ¡ˆ                                                         â”‚
â”‚  â”œâ”€ åŒ¹é…æŠ€æœ¯çŸ¥è¯†åº“è§„èŒƒ                                                    â”‚
â”‚  â”œâ”€ åˆ›å»ºæ•°æ®æ¨¡å‹è®¾è®¡                                                      â”‚
â”‚  â””â”€ è¾“å‡º: æ¶æ„è®¾è®¡æ–‡æ¡£ + ADR                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 4: å¼€å‘å®ç° [SM + DEV èƒ½åŠ›]                                       â”‚
â”‚  â”œâ”€ Sprint è§„åˆ’                                                         â”‚
â”‚  â”œâ”€ For Each Story:                                                     â”‚
â”‚  â”‚   â”œâ”€ åˆ›å»ºæ•…äº‹ä¸Šä¸‹æ–‡                                                   â”‚
â”‚  â”‚   â”œâ”€ TDD é©±åŠ¨å®ç°                                                    â”‚
â”‚  â”‚   â”œâ”€ ä»£ç å®¡æŸ¥                                                        â”‚
â”‚  â”‚   â””â”€ æ›´æ–°çŠ¶æ€                                                        â”‚
â”‚  â””â”€ è¾“å‡º: å®ç°çš„ä»£ç  + æµ‹è¯•                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 5: æµ‹è¯•éªŒè¯ [TEA èƒ½åŠ›]                                            â”‚
â”‚  â”œâ”€ æ‰§è¡Œå•å…ƒæµ‹è¯•                                                         â”‚
â”‚  â”œâ”€ æ‰§è¡Œé›†æˆæµ‹è¯•                                                         â”‚
â”‚  â”œâ”€ è´¨é‡é—¨ç¦æ£€æŸ¥                                                         â”‚
â”‚  â””â”€ è¾“å‡º: æµ‹è¯•æŠ¥å‘Š + è´¨é‡æŠ¥å‘Š                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾“å‡º                                                                    â”‚
â”‚  â”œâ”€ âœ… å®Œæ•´çš„ä»£ç å®ç°                                                     â”‚
â”‚  â”œâ”€ âœ… å®Œæ•´çš„æµ‹è¯•è¦†ç›–                                                     â”‚
â”‚  â”œâ”€ âœ… å®Œæ•´çš„æ–‡æ¡£äº§å‡º                                                     â”‚
â”‚  â””â”€ âœ… æ‰§è¡ŒæŠ¥å‘Šå’Œè¿½æº¯è®°å½•                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ‰§è¡ŒæŒ‡ä»¤

å½“ç”¨æˆ·è¾“å…¥ `*auto-iterate` æ—¶ï¼ŒæŒ‰ä»¥ä¸‹æµç¨‹è‡ªåŠ¨æ‰§è¡Œï¼š

### Step 0: åˆå§‹åŒ–

```markdown
## åˆå§‹åŒ–æ£€æŸ¥æ¸…å•

1. **æ£€æŸ¥å¿…è¦è¾“å…¥**
   - [ ] è¿­ä»£éœ€æ±‚æ–‡æ¡£è·¯å¾„æˆ–å†…å®¹
   - [ ] ç›®æ ‡é¡¹ç›®è·¯å¾„

2. **åŠ è½½çŸ¥è¯†åº“ (RAG æ¨¡å¼)**
   - è¯»å– `{project-root}/docs/rag/rag.md` æ–‡ä»¶
   - è§£æçŸ¥è¯†åº“ç»“æ„ï¼ˆä¸šåŠ¡çŸ¥è¯† + æŠ€æœ¯çŸ¥è¯†ï¼‰
   - æ„å»ºå…³é”®è¯ç´¢å¼•

3. **åˆ›å»ºæ‰§è¡ŒçŠ¶æ€æ–‡ä»¶**
   - åˆ›å»º `auto-iteration-status.yaml`
   - è®°å½•å¼€å§‹æ—¶é—´å’Œåˆå§‹çŠ¶æ€
   - è®°å½•çŸ¥è¯†åº“åŠ è½½çŠ¶æ€
```

**æ‰§è¡ŒåŠ¨ä½œ**ï¼š

```
## å¯åŠ¨å…¨è‡ªåŠ¨è¿­ä»£å¼€å‘

### ç¬¬ä¸€æ­¥ï¼šåŠ è½½çŸ¥è¯†åº“

æ­£åœ¨è¯»å–çŸ¥è¯†åº“æ–‡ä»¶: {project-root}/docs/rag/rag.md

**çŸ¥è¯†åº“åŠ è½½ç»“æœ**:
- ä¸šåŠ¡æœ¯è¯­: X æ¡
- ä¸šåŠ¡è§„åˆ™: X æ¡
- ä¸šåŠ¡æµç¨‹: X æ¡
- æŠ€æœ¯è§„èŒƒ: X æ¡
- ç¼–ç è§„èŒƒ: X æ¡
- æ¶æ„æ¨¡å¼: X æ¡

âœ… çŸ¥è¯†åº“åŠ è½½å®Œæˆ

### ç¬¬äºŒæ­¥ï¼šè¯·æä¾›è¿­ä»£éœ€æ±‚

è¯·ç²˜è´´äº§å“ç»ç†æä¾›çš„è¿­ä»£éœ€æ±‚æ–‡æ¡£å†…å®¹ï¼š

### ç¬¬ä¸‰æ­¥ï¼šç¡®è®¤é¡¹ç›®è·¯å¾„

ç›®æ ‡ä»£ç åº“è·¯å¾„: {project-root}
ç¡®è®¤åå°†å¼€å§‹å…¨è‡ªåŠ¨æ‰§è¡Œã€‚
```

**çŸ¥è¯†åº“æŸ¥è¯¢ç¤ºä¾‹**ï¼š

åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå½“é‡åˆ°éœ€è¦æŸ¥è¯¢çŸ¥è¯†åº“çš„åœºæ™¯æ—¶ï¼Œå°†æŒ‰ä»¥ä¸‹æ ¼å¼æ‰§è¡Œï¼š

```yaml
# çŸ¥è¯†åº“æŸ¥è¯¢
call_point: "KBC-1.2"
question: "è¯·æŸ¥è¯¢ä¸ç”¨æˆ·åå¥½è®¾ç½®ç›¸å…³çš„ä¸šåŠ¡è§„åˆ™"
source: "{project-root}/docs/rag/rag.md"

# æ‰§è¡Œæ­¥éª¤
1. æå–å…³é”®è¯: ["ç”¨æˆ·", "åå¥½", "è®¾ç½®", "ä¸šåŠ¡è§„åˆ™"]
2. åœ¨ rag.md ä¸­æœç´¢åŒ¹é…ç« èŠ‚
3. è¿”å›åŒ¹é…å†…å®¹

# æŸ¥è¯¢ç»“æœ
found: true
content: |
  ### è§„åˆ™: BR-003 åå¥½è®¾ç½®è§„åˆ™
  - æ¯ä¸ªç”¨æˆ·å¯è®¾ç½®æœ€å¤š100ä¸ªåå¥½é¡¹
  - åå¥½é”®åé•¿åº¦ä¸è¶…è¿‡100å­—ç¬¦
  - ...
source_section: "ä¸šåŠ¡è§„åˆ™ > BR-003"
confidence: "high"

# å†³ç­–
åŸºäºçŸ¥è¯†åº“ BR-003 è§„åˆ™ï¼Œå®ç°ä¸­å¿…é¡»ï¼š
1. é™åˆ¶åå¥½æ•°é‡ä¸º100
2. éªŒè¯é”®åé•¿åº¦
3. ...
```

---

### Step 1: éœ€æ±‚åˆ†æé˜¶æ®µ (Phase 1)

**è§’è‰²æ¿€æ´»**: Analyst (éœ€æ±‚åˆ†æå¸ˆ)

**è‡ªåŠ¨æ‰§è¡Œå†…å®¹**:

```yaml
phase: 1
name: éœ€æ±‚åˆ†æ
role: Analyst
inputs:
  - è¿­ä»£éœ€æ±‚æ–‡æ¡£
  - ä¸šåŠ¡çŸ¥è¯†åº“
outputs:
  - requirement-analysis.md

tasks:
  - name: è§£æéœ€æ±‚æ–‡æ¡£
    action: |
      1. è¯»å–éœ€æ±‚æ–‡æ¡£å…¨æ–‡
      2. æå–åŠŸèƒ½ç‚¹åˆ—è¡¨
      3. æå–ä¸šåŠ¡è§„åˆ™
      4. æå–çº¦æŸæ¡ä»¶

  - name: åŒ¹é…ä¸šåŠ¡çŸ¥è¯†åº“
    action: |
      1. åœ¨çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¸šåŠ¡è§„åˆ™
      2. éªŒè¯éœ€æ±‚ä¸ç°æœ‰ä¸šåŠ¡è§„åˆ™çš„ä¸€è‡´æ€§
      3. è¯†åˆ«éœ€è¦æ–°å¢çš„ä¸šåŠ¡è§„åˆ™
      4. æ ‡è®°æ½œåœ¨çš„ä¸šåŠ¡å†²çª

  - name: è¯†åˆ«éšå«éœ€æ±‚
    action: |
      1. åŸºäºä¸šåŠ¡çŸ¥è¯†æ¨æ–­éšå«éœ€æ±‚
      2. åŸºäºæŠ€æœ¯çº¦æŸæ¨æ–­éåŠŸèƒ½éœ€æ±‚
      3. åŸºäºç”¨æˆ·åœºæ™¯æ¨æ–­è¾¹ç•Œæ¡ä»¶

  - name: ç”Ÿæˆåˆ†ææŠ¥å‘Š
    output: requirement-analysis.md
    template: |
      # éœ€æ±‚åˆ†ææŠ¥å‘Š

      ## 1. éœ€æ±‚æ¦‚è¿°
      [ä»éœ€æ±‚æ–‡æ¡£æå–çš„æ ¸å¿ƒéœ€æ±‚æè¿°]

      ## 2. åŠŸèƒ½ç‚¹æ¸…å•
      | ID | åŠŸèƒ½ç‚¹ | ä¼˜å…ˆçº§ | çŸ¥è¯†åº“åŒ¹é… |
      |----|-------|-------|-----------|

      ## 3. ä¸šåŠ¡è§„åˆ™åŒ¹é…
      ### å·²åŒ¹é…çš„ä¸šåŠ¡è§„åˆ™
      [ä»çŸ¥è¯†åº“åŒ¹é…åˆ°çš„è§„åˆ™]

      ### æ–°å¢ä¸šåŠ¡è§„åˆ™
      [éœ€è¦æ–°å¢çš„è§„åˆ™]

      ## 4. éšå«éœ€æ±‚
      [æ¨æ–­å‡ºçš„éšå«éœ€æ±‚]

      ## 5. çº¦æŸå’Œé£é™©
      [è¯†åˆ«çš„çº¦æŸæ¡ä»¶å’Œæ½œåœ¨é£é™©]

      ## 6. ä¸‹ä¸€é˜¶æ®µè¾“å…¥
      [ä¸º Phase 2 å‡†å¤‡çš„ç»“æ„åŒ–è¾“å…¥]
```

**è´¨é‡é—¨ç¦**:
- [ ] æ‰€æœ‰åŠŸèƒ½ç‚¹éƒ½å·²è¯†åˆ«
- [ ] ä¸šåŠ¡è§„åˆ™åŒ¹é…ç‡ > 80%
- [ ] æ— æœªè§£å†³çš„ä¸šåŠ¡å†²çª

**é˜»å¡å¤„ç†**:
- å¦‚æœä¸šåŠ¡è§„åˆ™åŒ¹é…ç‡ < 80%ï¼Œè‡ªåŠ¨åœ¨çŸ¥è¯†åº“ä¸­æ‰©å¤§æœç´¢èŒƒå›´
- å¦‚æœå­˜åœ¨ä¸šåŠ¡å†²çªï¼Œè®°å½•å†²çªå¹¶æ ‡è®°ä¸º"éœ€ç¡®è®¤"ï¼Œç»§ç»­æ‰§è¡Œ

---

### Step 2: éœ€æ±‚è§„åˆ’é˜¶æ®µ (Phase 2)

**è§’è‰²æ¿€æ´»**: PM (äº§å“ç»ç†) + PO (äº§å“è´Ÿè´£äºº)

**è‡ªåŠ¨æ‰§è¡Œå†…å®¹**:

```yaml
phase: 2
name: éœ€æ±‚è§„åˆ’
role: PM + PO
inputs:
  - requirement-analysis.md
  - ä¸šåŠ¡çŸ¥è¯†åº“
outputs:
  - prd.md
  - epics/
  - stories/

tasks:
  - name: åˆ›å»º PRD
    action: |
      1. åŸºäºéœ€æ±‚åˆ†ææŠ¥å‘Šåˆ›å»º PRD
      2. å®šä¹‰äº§å“ç›®æ ‡å’ŒæˆåŠŸæŒ‡æ ‡
      3. è¯¦ç»†æè¿°æ¯ä¸ªåŠŸèƒ½éœ€æ±‚ (FR)
      4. å®šä¹‰éåŠŸèƒ½éœ€æ±‚ (NFR)
    output: prd.md

  - name: åˆ›å»ºå²è¯—
    action: |
      1. å°†åŠŸèƒ½éœ€æ±‚æŒ‰æ¨¡å—åˆ†ç»„ä¸ºå²è¯—
      2. å®šä¹‰æ¯ä¸ªå²è¯—çš„ä¸šåŠ¡ä»·å€¼
      3. ç¡®å®šå²è¯—é—´çš„ä¾èµ–å…³ç³»
    output: epics/

  - name: åˆ†è§£ç”¨æˆ·æ•…äº‹
    action: |
      1. å°†æ¯ä¸ªå²è¯—åˆ†è§£ä¸ºç”¨æˆ·æ•…äº‹
      2. ä½¿ç”¨ INVEST åŸåˆ™éªŒè¯æ•…äº‹è´¨é‡
      3. å®šä¹‰æ¥å—æ ‡å‡† (Given/When/Then)
      4. ä¼°ç®—æ•…äº‹ç‚¹
    output: stories/

  - name: PO éªŒæ”¶æ ‡å‡†å®¡æ ¸
    action: |
      1. éªŒè¯æ¯ä¸ªæ•…äº‹çš„ä¸šåŠ¡ä»·å€¼
      2. ç¡®è®¤æ¥å—æ ‡å‡†å®Œæ•´æ€§
      3. ç¡®è®¤ä¼˜å…ˆçº§æ’åº
```

**PRD æ¨¡æ¿**:

```markdown
# äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

## 1. äº§å“æ¦‚è¿°
### 1.1 èƒŒæ™¯
### 1.2 ç›®æ ‡
### 1.3 æˆåŠŸæŒ‡æ ‡

## 2. åŠŸèƒ½éœ€æ±‚ (FRs)
### FR-001: [åŠŸèƒ½åç§°]
- **æè¿°**:
- **ç”¨æˆ·æ•…äº‹**: As a [è§’è‰²], I want [åŠŸèƒ½], So that [ä»·å€¼]
- **æ¥å—æ ‡å‡†**:
  - Given [å‰ç½®æ¡ä»¶]
  - When [æ“ä½œ]
  - Then [é¢„æœŸç»“æœ]
- **ä¼˜å…ˆçº§**: P0/P1/P2
- **çŸ¥è¯†åº“ä¾æ®**: [å¼•ç”¨çš„ä¸šåŠ¡è§„åˆ™]

## 3. éåŠŸèƒ½éœ€æ±‚ (NFRs)
### NFR-001: æ€§èƒ½è¦æ±‚
### NFR-002: å®‰å…¨è¦æ±‚
### NFR-003: å¯ç”¨æ€§è¦æ±‚

## 4. ä¾èµ–å’Œçº¦æŸ
## 5. é£é™©å’Œç¼“è§£æªæ–½
```

**è´¨é‡é—¨ç¦**:
- [ ] PRD è¦†ç›–æ‰€æœ‰å·²è¯†åˆ«çš„åŠŸèƒ½ç‚¹
- [ ] æ¯ä¸ªæ•…äº‹éƒ½æœ‰æ˜ç¡®çš„æ¥å—æ ‡å‡†
- [ ] æ•…äº‹ç‚¹ä¼°ç®—å®Œæˆ
- [ ] ä¼˜å…ˆçº§æ’åºå®Œæˆ

---

### Step 3: æ¶æ„è®¾è®¡é˜¶æ®µ (Phase 3)

**è§’è‰²æ¿€æ´»**: Architect (æ¶æ„å¸ˆ)

**è‡ªåŠ¨æ‰§è¡Œå†…å®¹**:

```yaml
phase: 3
name: æ¶æ„è®¾è®¡
role: Architect
inputs:
  - prd.md
  - epics/
  - æŠ€æœ¯çŸ¥è¯†åº“
  - ç°æœ‰ä»£ç åº“
outputs:
  - architecture.md
  - adr/

tasks:
  - name: åˆ†æç°æœ‰æ¶æ„
    action: |
      1. æ‰«æç›®æ ‡ä»£ç åº“ç»“æ„
      2. è¯†åˆ«ç°æœ‰æŠ€æœ¯æ ˆ
      3. è¯†åˆ«ç°æœ‰æ¶æ„æ¨¡å¼
      4. è¯†åˆ«å¯å¤ç”¨ç»„ä»¶

  - name: è®¾è®¡æŠ€æœ¯æ–¹æ¡ˆ
    action: |
      1. åŸºäº PRD è®¾è®¡æŠ€æœ¯å®ç°æ–¹æ¡ˆ
      2. åŒ¹é…æŠ€æœ¯çŸ¥è¯†åº“ä¸­çš„æœ€ä½³å®è·µ
      3. è®¾è®¡æ–°å¢ç»„ä»¶å’Œæ¨¡å—
      4. è®¾è®¡ API æ¥å£

  - name: æ•°æ®æ¨¡å‹è®¾è®¡
    action: |
      1. è®¾è®¡æ–°å¢/å˜æ›´çš„æ•°æ®è¡¨
      2. åˆ›å»º ER å›¾
      3. è®¾è®¡æ•°æ®è¿ç§»ç­–ç•¥

  - name: æŠ€æœ¯å†³ç­–è®°å½•
    action: |
      1. è®°å½•å…³é”®æŠ€æœ¯é€‰å‹
      2. è®°å½•é€‰å‹ç†ç”±å’Œæƒè¡¡
      3. å¼•ç”¨æŠ€æœ¯çŸ¥è¯†åº“ä¾æ®
    output: adr/
```

**æ¶æ„æ–‡æ¡£æ¨¡æ¿**:

```markdown
# æ¶æ„è®¾è®¡æ–‡æ¡£

## 1. ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ
### 1.1 æ¶æ„å›¾
[Mermaid å›¾]

### 1.2 ç»„ä»¶è¯´æ˜

## 2. æŠ€æœ¯å†³ç­–
### ADR-001: [å†³ç­–æ ‡é¢˜]
- **çŠ¶æ€**: å·²é‡‡çº³
- **ä¸Šä¸‹æ–‡**: [ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå†³ç­–]
- **å†³ç­–**: [å…·ä½“å†³ç­–å†…å®¹]
- **ç†ç”±**: [ä¸ºä»€ä¹ˆè¿™æ ·å†³ç­–]
- **çŸ¥è¯†åº“ä¾æ®**: [å¼•ç”¨çš„æŠ€æœ¯è§„èŒƒ]

## 3. æ•°æ®æ¨¡å‹
### 3.1 ER å›¾
### 3.2 è¡¨ç»“æ„è®¾è®¡

## 4. API è®¾è®¡
### 4.1 æ–°å¢æ¥å£
### 4.2 å˜æ›´æ¥å£

## 5. æ–‡ä»¶å˜æ›´æ¸…å•
| æ–‡ä»¶è·¯å¾„ | å˜æ›´ç±»å‹ | è¯´æ˜ |
|---------|---------|------|
```

**è´¨é‡é—¨ç¦**:
- [ ] æ¶æ„è®¾è®¡è¦†ç›–æ‰€æœ‰åŠŸèƒ½éœ€æ±‚
- [ ] æŠ€æœ¯å†³ç­–éƒ½æœ‰çŸ¥è¯†åº“ä¾æ®
- [ ] æ•°æ®æ¨¡å‹è®¾è®¡å®Œæ•´
- [ ] API è®¾è®¡ç¬¦åˆç°æœ‰è§„èŒƒ

---

### Step 4: å¼€å‘å®ç°é˜¶æ®µ (Phase 4)

**è§’è‰²æ¿€æ´»**: SM (Scrum Master - Bob) + DEV (Developer - Amelia)

> **é‡è¦**: æœ¬é˜¶æ®µä¸¥æ ¼éµå¾ªé¡¹ç›®æ™ºèƒ½ä½“çš„æ ‡å‡†å·¥ä½œæµï¼Œç¡®ä¿ä¸ SM å’Œ DEV æ™ºèƒ½ä½“çš„å®Œå…¨å…¼å®¹ã€‚

**æ•…äº‹çŠ¶æ€å®šä¹‰** (ä¸ SM æ™ºèƒ½ä½“ä¸€è‡´):

```yaml
# æ•…äº‹çŠ¶æ€æµè½¬ (6çŠ¶æ€ç³»ç»Ÿ)
story_status:
  backlog: "æ•…äº‹ä»…å­˜åœ¨äº epic æ–‡ä»¶ä¸­"
  drafted: "æ•…äº‹æ–‡ä»¶å·²åˆ›å»ºäº stories æ–‡ä»¶å¤¹"
  ready-for-dev: "æ•…äº‹è‰ç¨¿å·²å®¡æ ¸ï¼Œå¯ä»¥å¼€å§‹å¼€å‘"
  in-progress: "å¼€å‘è€…æ­£åœ¨ç§¯æå®ç°ä¸­"
  review: "å®ç°å®Œæˆï¼Œç­‰å¾…ä»£ç å®¡æŸ¥"
  done: "æ•…äº‹å·²å®Œæˆ"

# Epic çŠ¶æ€
epic_status:
  backlog: "Epic å°šæœªå¼€å§‹"
  in-progress: "Epic æ­£åœ¨è¿›è¡Œä¸­"
  done: "Epic ä¸­æ‰€æœ‰æ•…äº‹å·²å®Œæˆ"
```

**è‡ªåŠ¨æ‰§è¡Œå†…å®¹**:

```yaml
phase: 4
name: å¼€å‘å®ç°
inputs:
  - architecture.md
  - epics/*.md  # åŒ…å«æ•…äº‹å®šä¹‰çš„ Epic æ–‡ä»¶
  - æŠ€æœ¯çŸ¥è¯†åº“
outputs:
  - sprint-status.yaml  # ä½¿ç”¨ SM æ™ºèƒ½ä½“çš„æ ‡å‡†æ ¼å¼
  - stories/*.md  # ç‹¬ç«‹æ•…äº‹æ–‡ä»¶
  - å®ç°çš„ä»£ç 
  - æµ‹è¯•ä»£ç 
  - code-review-reports/

# è°ƒç”¨çš„æ™ºèƒ½ä½“å·¥ä½œæµ
workflows_invoked:
  - agent: SM (Bob)
    workflow: sprint-planning
    purpose: "ç”Ÿæˆ sprint-status.yaml"
  - agent: SM (Bob)
    workflow: create-story
    purpose: "ä¸ºæ¯ä¸ªæ•…äº‹åˆ›å»ºè¯¦ç»†æ•…äº‹æ–‡ä»¶"
  - agent: DEV (Amelia)
    workflow: dev-story
    purpose: "TDD é©±åŠ¨çš„æ•…äº‹å®ç°"
  - agent: DEV (Amelia)
    workflow: code-review
    purpose: "ä»£ç å®¡æŸ¥éªŒè¯"
```

---

#### Step 4.1: Sprint è§„åˆ’ (SM è§’è‰²)

**è°ƒç”¨å·¥ä½œæµ**: `{xiaoma_folder}/xmc/workflows/4-implementation/sprint-planning/workflow.yaml`

```yaml
task: sprint_planning
role: SM (Bob)
invoke_workflow: "*sprint-planning"
actions:
  - name: åˆ†æ Epic æ–‡ä»¶
    scan:
      - "{output_folder}/*epic*.md"
    extract:
      - Epic ID å’Œåç§°
      - æ‰€æœ‰æ•…äº‹æ ‡è¯†ç¬¦
      - ä¾èµ–å…³ç³»

  - name: ç”Ÿæˆ sprint-status.yaml
    output_format: |
      # Sprint Status File (SM æ™ºèƒ½ä½“æ ‡å‡†æ ¼å¼)
      generated: {date}
      project: {project_name}
      project_key: {project_key}
      tracking_system: file-system
      story_location: "{sprint_artifacts}"

      development_status:
        epic-1: backlog
        1-1-story-name: backlog
        1-2-story-name: backlog
        epic-1-retrospective: optional
        epic-2: backlog
        2-1-story-name: backlog

  - name: ç¡®å®šå¼€å‘é¡ºåº
    criteria:
      - æŠ€æœ¯ä¾èµ–ï¼ˆåŸºç¡€ç»„ä»¶ä¼˜å…ˆï¼‰
      - ä¸šåŠ¡ä¾èµ–ï¼ˆå‰ç½®åŠŸèƒ½ä¼˜å…ˆï¼‰
      - ä¼˜å…ˆçº§æ’åº
```

---

#### Step 4.2: æ•…äº‹å¼€å‘å¾ªç¯

**å¯¹äºæ¯ä¸ªæ•…äº‹ï¼Œæ‰§è¡Œå®Œæ•´çš„çŠ¶æ€è½¬æ¢å’Œå¼€å‘å¾ªç¯**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ•…äº‹ç”Ÿå‘½å‘¨æœŸç®¡ç†                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Step 4.2.1: æ•…äº‹å‡†å¤‡ (SM - Bob)                                            â”‚
â”‚  â”œâ”€ è°ƒç”¨: *create-story                                                    â”‚
â”‚  â”œâ”€ è¾“å…¥: Epic ä¸­çš„æ•…äº‹å®šä¹‰                                                  â”‚
â”‚  â”œâ”€ è¾“å‡º: stories/{story-key}.md                                           â”‚
â”‚  â””â”€ çŠ¶æ€: backlog â†’ drafted â†’ ready-for-dev                                â”‚
â”‚                                                                             â”‚
â”‚  Step 4.2.2: æ•…äº‹å¼€å‘ (DEV - Amelia)                                        â”‚
â”‚  â”œâ”€ è°ƒç”¨: *develop-story                                                   â”‚
â”‚  â”œâ”€ è¾“å…¥: ready-for-dev çŠ¶æ€çš„æ•…äº‹                                          â”‚
â”‚  â”œâ”€ æ‰§è¡Œ: TDD é©±åŠ¨å¼€å‘ (çº¢-ç»¿-é‡æ„)                                          â”‚
â”‚  â””â”€ çŠ¶æ€: ready-for-dev â†’ in-progress â†’ review                             â”‚
â”‚                                                                             â”‚
â”‚  Step 4.2.3: ä»£ç å®¡æŸ¥ (DEV - Amelia)                                        â”‚
â”‚  â”œâ”€ è°ƒç”¨: *code-review                                                     â”‚
â”‚  â”œâ”€ è¾“å…¥: review çŠ¶æ€çš„æ•…äº‹                                                 â”‚
â”‚  â”œâ”€ å®¡æŸ¥: åŠŸèƒ½æ­£ç¡®æ€§ + ä»£ç è´¨é‡ + å®‰å…¨æ€§                                      â”‚
â”‚  â””â”€ çŠ¶æ€: review â†’ done (é€šè¿‡) æˆ– è¿”å›ä¿®å¤                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### Step 4.2.1: æ•…äº‹å‡†å¤‡ (create-story)

**è°ƒç”¨å·¥ä½œæµ**: `{xiaoma_folder}/xmc/workflows/4-implementation/create-story/workflow.yaml`

```yaml
task: prepare_story
role: SM (Bob)
invoke_workflow: "*create-story"

for_each: story in sprint_status.development_status
  where: status == "backlog" AND is_story (not epic/retrospective)

actions:
  - name: åˆ›å»ºæ•…äº‹æ–‡ä»¶
    inputs:
      - sprint_status: "{sprint_artifacts}/sprint-status.yaml"
      - epics_file: "{output_folder}/epics.md"
      - prd_file: "{output_folder}/PRD.md"
      - architecture_file: "{output_folder}/architecture.md"

  - name: ç”Ÿæˆæ•…äº‹ä¸Šä¸‹æ–‡
    include:
      - ç”¨æˆ·æ•…äº‹æè¿°
      - æ¥å—æ ‡å‡† (Given-When-Then)
      - æŠ€æœ¯è¯´æ˜ (Dev Notes)
      - ä»»åŠ¡/å­ä»»åŠ¡åˆ†è§£
      - ç›¸å…³æ–‡ä»¶åˆ—è¡¨

  - name: æ›´æ–°çŠ¶æ€
    update_sprint_status:
      story_key: "backlog â†’ drafted"

  - name: è‡ªåŠ¨éªŒè¯å¹¶æ ‡è®° ready-for-dev
    # SM æ™ºèƒ½ä½“çš„ create-story æ”¯æŒç›´æ¥æ ‡è®° ready-for-dev
    validate:
      - æ¥å—æ ‡å‡†å®Œæ•´æ€§
      - ä»»åŠ¡åˆ†è§£åˆç†æ€§
      - æŠ€æœ¯è¯´æ˜å……åˆ†æ€§
    on_pass:
      update_sprint_status:
        story_key: "drafted â†’ ready-for-dev"
```

**æ•…äº‹æ–‡ä»¶æ ¼å¼** (ç¬¦åˆ DEV æ™ºèƒ½ä½“è¦æ±‚):

```markdown
# Story: {story-key}

## Story
As a [ç”¨æˆ·è§’è‰²],
I want [åŠŸèƒ½],
So that [ä»·å€¼].

## Acceptance Criteria
- [ ] **AC-001**: Given [æ¡ä»¶], When [æ“ä½œ], Then [ç»“æœ]
- [ ] **AC-002**: ...

## Tasks/Subtasks
- [ ] TASK-001: [ä»»åŠ¡æè¿°]
  - [ ] SUBTASK-001-1: [å­ä»»åŠ¡]
  - [ ] SUBTASK-001-2: [å­ä»»åŠ¡]
- [ ] TASK-002: [ä»»åŠ¡æè¿°]

## Dev Notes
### Architecture Requirements
[æ¶æ„è®¾è®¡ä¸­çš„ç›¸å…³éƒ¨åˆ†]

### Technical Specifications
[æŠ€æœ¯å®ç°è¯´æ˜]

### Coding Standards
[ä»çŸ¥è¯†åº“è·å–çš„ç¼–ç è§„èŒƒ]

## Dev Agent Record
### Implementation Plan
[å¼€å‘è¿‡ç¨‹ä¸­å¡«å†™]

### Debug Log
[è°ƒè¯•æ—¥å¿—]

### Completion Notes
[å®Œæˆè¯´æ˜]

## File List
[å˜æ›´çš„æ–‡ä»¶åˆ—è¡¨]

## Change Log
[å˜æ›´æ—¥å¿—]

## Status
drafted  <!-- å°†æ›´æ–°ä¸º: ready-for-dev â†’ in-progress â†’ review â†’ done -->
```

---

#### Step 4.2.2: æ•…äº‹å¼€å‘ (develop-story)

**è°ƒç”¨å·¥ä½œæµ**: `{xiaoma_folder}/xmc/workflows/4-implementation/dev-story/workflow.yaml`

```yaml
task: develop_story
role: DEV (Amelia)
invoke_workflow: "*develop-story"

precondition:
  - sprint_status[story_key] == "ready-for-dev"

execution_flow:
  # DEV æ™ºèƒ½ä½“ dev-story å·¥ä½œæµçš„ 10 ä¸ªæ­¥éª¤
  step_1: "æŸ¥æ‰¾ ready-for-dev æ•…äº‹å¹¶åŠ è½½"
  step_2: "åŠ è½½é¡¹ç›®ä¸Šä¸‹æ–‡å’Œæ•…äº‹ä¿¡æ¯"
  step_3: "æ£€æµ‹æ˜¯å¦æ˜¯ä»£ç å®¡æŸ¥åçš„ç»§ç»­"
  step_4: "æ ‡è®°æ•…äº‹ä¸º in-progress"
  step_5: "TDD å®ç° (çº¢-ç»¿-é‡æ„)"
  step_6: "ç¼–å†™å…¨é¢æµ‹è¯•"
  step_7: "è¿è¡ŒéªŒè¯å’Œæµ‹è¯•"
  step_8: "éªŒè¯å¹¶æ ‡è®°ä»»åŠ¡å®Œæˆ"
  step_9: "æ•…äº‹å®Œæˆï¼Œæ ‡è®°ä¸º review"
  step_10: "å®Œæˆæ²Ÿé€šå’Œç”¨æˆ·æ”¯æŒ"

tdd_cycle:
  red_phase:
    - æ ¹æ®æ¥å—æ ‡å‡†ç¼–å†™å¤±è´¥æµ‹è¯•
    - ç¡®è®¤æµ‹è¯•å¤±è´¥åŸå› æ˜¯åŠŸèƒ½æœªå®ç°

  green_phase:
    - å®ç°æœ€å°ä»£ç ä½¿æµ‹è¯•é€šè¿‡
    - è¿è¡Œæµ‹è¯•ç¡®è®¤é€šè¿‡

  refactor_phase:
    - ä¼˜åŒ–ä»£ç ç»“æ„
    - ç¡®ä¿æµ‹è¯•ä»ç„¶é€šè¿‡

critical_rules:
  - "æ•…äº‹æ–‡ä»¶æ˜¯å”¯ä¸€çš„äº‹å®æ¥æº"
  - "ä¸¥æ ¼æŒ‰ç…§ Tasks/Subtasks é¡ºåºæ‰§è¡Œ"
  - "ç»ä¸å®ç°æ•…äº‹æ–‡ä»¶ä¸­æœªå®šä¹‰çš„å†…å®¹"
  - "æ¯ä¸ªä»»åŠ¡å®Œæˆå‰å¿…é¡»æœ‰æµ‹è¯•è¦†ç›–"
  - "æ‰€æœ‰æµ‹è¯•å¿…é¡» 100% é€šè¿‡æ‰èƒ½ç»§ç»­"

status_transitions:
  on_start: "ready-for-dev â†’ in-progress"
  on_complete: "in-progress â†’ review"
```

---

#### Step 4.2.3: ä»£ç å®¡æŸ¥ (code-review)

**è°ƒç”¨å·¥ä½œæµ**: `{xiaoma_folder}/xmc/workflows/4-implementation/code-review/workflow.yaml`

```yaml
task: code_review
role: DEV (Amelia)
invoke_workflow: "*code-review"

precondition:
  - sprint_status[story_key] == "review"

review_dimensions:
  functionality:
    - æ˜¯å¦æ»¡è¶³æ‰€æœ‰æ¥å—æ ‡å‡†
    - è¾¹ç•Œæƒ…å†µæ˜¯å¦å¤„ç†
    - å¼‚å¸¸å¤„ç†æ˜¯å¦å®Œå–„

  code_quality:
    - ä»£ç æ˜¯å¦æ¸…æ™°å¯è¯»
    - å‘½åæ˜¯å¦è§„èŒƒ
    - æ˜¯å¦éµå¾ªé¡¹ç›®è§„èŒƒ

  security:
    - æ˜¯å¦å­˜åœ¨æ³¨å…¥é£é™©
    - æ•æ„Ÿæ•°æ®å¤„ç†
    - è®¤è¯æˆæƒæ­£ç¡®æ€§

  performance:
    - æ˜¯å¦æœ‰æ€§èƒ½é—®é¢˜
    - æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
    - å†…å­˜æ³„æ¼é£é™©

  test_coverage:
    - æµ‹è¯•æ˜¯å¦å……åˆ†
    - è¾¹ç•Œæƒ…å†µè¦†ç›–
    - æµ‹è¯•å¯ç»´æŠ¤æ€§

review_outcome:
  APPROVED:
    action: "æ›´æ–°çŠ¶æ€ä¸º done"
    update_sprint_status:
      story_key: "review â†’ done"

  CHANGES_REQUESTED:
    action: "ç”Ÿæˆä¿®å¤ä»»åŠ¡ï¼Œè¿”å›å¼€å‘"
    insert_review_followups: true
    # DEV æ™ºèƒ½ä½“ä¼šåœ¨ä¸‹æ¬¡æ‰§è¡Œæ—¶å¤„ç†å®¡æŸ¥åé¦ˆ

best_practice: |
  å»ºè®®ä½¿ç”¨ä¸åŒçš„ LLM æ‰§è¡Œä»£ç å®¡æŸ¥ä»¥è·å¾—æ›´å®¢è§‚çš„è¯„ä¼°
```

---

#### Step 4.2.4: æ›´æ–° Sprint çŠ¶æ€

```yaml
task: update_sprint_status
after_each_story:
  - name: æ›´æ–°æ•…äº‹çŠ¶æ€
    file: "{sprint_artifacts}/sprint-status.yaml"
    update:
      development_status[story_key]: "{new_status}"

  - name: æ›´æ–° Epic çŠ¶æ€
    logic: |
      if all_stories_in_epic == "done":
        epic_status = "done"
      elif any_story_in_epic == "in-progress" or "review":
        epic_status = "in-progress"
      else:
        epic_status = "backlog"

  - name: è®¡ç®—è¿›åº¦
    metrics:
      total_stories: count(stories)
      completed_stories: count(stories where status == "done")
      completion_rate: completed_stories / total_stories * 100%
```

---

**TDD æ‰§è¡Œæµç¨‹è¯¦è§£**:

```
For Each Task in Story:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ 1. ğŸ”´ ç¼–å†™æµ‹è¯• (Red Phase)                                    â”‚
  â”‚    â”œâ”€ æŸ¥è¯¢çŸ¥è¯†åº“è·å–æµ‹è¯•è§„èŒƒ                                   â”‚
  â”‚    â”œâ”€ æ ¹æ®æ¥å—æ ‡å‡†ç¼–å†™æµ‹è¯•ç”¨ä¾‹                                  â”‚
  â”‚    â”œâ”€ è¿è¡Œæµ‹è¯•ï¼Œç¡®è®¤å¤±è´¥                                       â”‚
  â”‚    â””â”€ éªŒè¯å¤±è´¥åŸå› æ˜¯åŠŸèƒ½æœªå®ç°                                  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ 2. ğŸŸ¢ å®ç°ä»£ç  (Green Phase)                                  â”‚
  â”‚    â”œâ”€ æŸ¥è¯¢çŸ¥è¯†åº“è·å–ç¼–ç è§„èŒƒ                                   â”‚
  â”‚    â”œâ”€ ç¼–å†™æœ€å°ä»£ç ä½¿æµ‹è¯•é€šè¿‡                                    â”‚
  â”‚    â”œâ”€ è¿è¡Œæµ‹è¯•ï¼Œç¡®è®¤é€šè¿‡                                       â”‚
  â”‚    â””â”€ å¤„ç†è¾¹ç•Œæƒ…å†µå’Œå¼‚å¸¸                                       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ 3. ğŸ”µ é‡æ„ (Refactor Phase)                                  â”‚
  â”‚    â”œâ”€ æ£€æŸ¥ä»£ç è´¨é‡ï¼ˆé‡å¤ã€å¤æ‚åº¦ï¼‰                              â”‚
  â”‚    â”œâ”€ åº”ç”¨ä¼˜åŒ–ï¼ˆæå–æ–¹æ³•ã€ç®€åŒ–é€»è¾‘ï¼‰                            â”‚
  â”‚    â”œâ”€ è¿è¡Œæµ‹è¯•ç¡®ä¿ä»ç„¶é€šè¿‡                                     â”‚
  â”‚    â””â”€ æ›´æ–° Dev Agent Record                                  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ 4. âœ… æ ‡è®°ä»»åŠ¡å®Œæˆ                                            â”‚
  â”‚    â”œâ”€ éªŒè¯æ‰€æœ‰æµ‹è¯•å­˜åœ¨ä¸”é€šè¿‡                                   â”‚
  â”‚    â”œâ”€ æ ‡è®°ä»»åŠ¡ checkbox [x]                                  â”‚
  â”‚    â”œâ”€ æ›´æ–° File List                                        â”‚
  â”‚    â””â”€ ç»§ç»­ä¸‹ä¸€ä¸ªä»»åŠ¡æˆ–è¿›å…¥å®Œæˆæµç¨‹                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è´¨é‡é—¨ç¦**:
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ (100%)
- [ ] ä»£ç å®¡æŸ¥é€šè¿‡ (APPROVED)
- [ ] æ— å®‰å…¨æ¼æ´ (0 critical/high)
- [ ] ç¬¦åˆä»£ç è§„èŒƒ (lint é€šè¿‡)
- [ ] æµ‹è¯•è¦†ç›–ç‡ >= 80%

---

### Step 5: æµ‹è¯•éªŒè¯é˜¶æ®µ (Phase 5)

**è§’è‰²æ¿€æ´»**: TEA (æµ‹è¯•æ¶æ„å¸ˆ - Murat)

> **é‡è¦**: æœ¬é˜¶æ®µé›†æˆ TEA æ™ºèƒ½ä½“çš„ä¸“ç”¨æµ‹è¯•å·¥ä½œæµï¼Œæä¾›å…¨é¢çš„æµ‹è¯•éªŒè¯èƒ½åŠ›ã€‚

**è‡ªåŠ¨æ‰§è¡Œå†…å®¹**:

```yaml
phase: 5
name: æµ‹è¯•éªŒè¯
role: TEA (Murat)
inputs:
  - å®ç°çš„ä»£ç 
  - æµ‹è¯•ä»£ç 
  - prd.md
  - stories/
  - architecture.md
outputs:
  - test-report.md
  - quality-report.md
  - traceability-matrix.md
  - coverage-report/

# è°ƒç”¨çš„ TEA æ™ºèƒ½ä½“å·¥ä½œæµ
workflows_invoked:
  - agent: TEA (Murat)
    workflow: trace
    purpose: "éœ€æ±‚åˆ°æµ‹è¯•çš„è¿½è¸ªæ˜ å°„"
  - agent: TEA (Murat)
    workflow: test-review
    purpose: "æµ‹è¯•è´¨é‡è¯„å®¡"
  - agent: TEA (Murat)
    workflow: nfr-assess
    purpose: "éåŠŸèƒ½æ€§éœ€æ±‚éªŒè¯"
```

---

#### Step 5.1: éœ€æ±‚è¿½æº¯éªŒè¯

**è°ƒç”¨å·¥ä½œæµ**: `{xiaoma_folder}/xmc/workflows/testarch/trace/workflow.yaml`

```yaml
task: requirement_traceability
role: TEA (Murat)
invoke_workflow: "*trace"

actions:
  - name: æ„å»ºè¿½æº¯çŸ©é˜µ
    map:
      - FR â†’ Stories â†’ Tests
      - AC â†’ Test Cases
      - NFR â†’ Validation Tests

  - name: éªŒè¯è¦†ç›–å®Œæ•´æ€§
    check:
      - æ¯ä¸ª FR éƒ½æœ‰å¯¹åº”æµ‹è¯•
      - æ¯ä¸ª AC éƒ½æœ‰å¯¹åº”æµ‹è¯•ç”¨ä¾‹
      - æ— é—æ¼çš„éœ€æ±‚

  - name: ç”Ÿæˆè¿½æº¯æŠ¥å‘Š
    output: "traceability-matrix.md"
```

---

#### Step 5.2: æ‰§è¡Œæµ‹è¯•å¥—ä»¶

```yaml
task: execute_test_suites
actions:
  - name: è¿è¡Œå•å…ƒæµ‹è¯•
    command: "npm run test:unit"
    collect:
      - é€šè¿‡/å¤±è´¥æ•°é‡
      - è¦†ç›–ç‡æŠ¥å‘Š
      - å¤±è´¥è¯¦æƒ…

  - name: è¿è¡Œé›†æˆæµ‹è¯•
    command: "npm run test:integration"
    collect:
      - é€šè¿‡/å¤±è´¥æ•°é‡
      - API æµ‹è¯•ç»“æœ
      - æ•°æ®åº“æµ‹è¯•ç»“æœ

  - name: è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
    command: "npm run test:e2e"
    if: e2e_tests_exist
    collect:
      - é€šè¿‡/å¤±è´¥æ•°é‡
      - ç”¨æˆ·æµç¨‹æµ‹è¯•ç»“æœ
```

---

#### Step 5.3: æµ‹è¯•è´¨é‡è¯„å®¡

**è°ƒç”¨å·¥ä½œæµ**: `{xiaoma_folder}/xmc/workflows/testarch/test-review/workflow.yaml`

```yaml
task: test_quality_review
role: TEA (Murat)
invoke_workflow: "*test-review"

review_criteria:
  - name: æµ‹è¯•å……åˆ†æ€§
    check:
      - å…³é”®è·¯å¾„æ˜¯å¦è¦†ç›–
      - è¾¹ç•Œæ¡ä»¶æ˜¯å¦æµ‹è¯•
      - å¼‚å¸¸åœºæ™¯æ˜¯å¦è¦†ç›–

  - name: æµ‹è¯•è´¨é‡
    check:
      - æµ‹è¯•æ˜¯å¦ç‹¬ç«‹
      - æ–­è¨€æ˜¯å¦æ˜ç¡®
      - æµ‹è¯•æ˜¯å¦å¯ç»´æŠ¤

  - name: æµ‹è¯•æ¨¡å¼
    check:
      - AAA æ¨¡å¼ (Arrange-Act-Assert)
      - å•ä¸€èŒè´£
      - æ— ç¡¬ç¼–ç ä¾èµ–

output:
  test_review_report:
    score: "[A-F]"
    issues: []
    recommendations: []
```

---

#### Step 5.4: NFR éªŒè¯

**è°ƒç”¨å·¥ä½œæµ**: `{xiaoma_folder}/xmc/workflows/testarch/nfr-assess/workflow.yaml`

```yaml
task: nfr_validation
role: TEA (Murat)
invoke_workflow: "*nfr-assess"

validations:
  performance:
    - nfr_id: "NFR-PERF-001"
      requirement: "é¡µé¢å“åº”æ—¶é—´ < 2s"
      test_method: "æ€§èƒ½æµ‹è¯•"

    - nfr_id: "NFR-PERF-002"
      requirement: "API å“åº”æ—¶é—´ < 500ms"
      test_method: "è´Ÿè½½æµ‹è¯•"

  security:
    - nfr_id: "NFR-SEC-001"
      requirement: "æ‰€æœ‰ API éœ€è¦è®¤è¯"
      test_method: "å®‰å…¨æ‰«æ"

    - nfr_id: "NFR-SEC-002"
      requirement: "æ•æ„Ÿæ•°æ®åŠ å¯†ä¼ è¾“"
      test_method: "HTTPS éªŒè¯"

  usability:
    - nfr_id: "NFR-USA-001"
      requirement: "æ”¯æŒå“åº”å¼å¸ƒå±€"
      test_method: "å¤šè®¾å¤‡æµ‹è¯•"
```

---

#### Step 5.5: è´¨é‡é—¨ç¦æ£€æŸ¥

```yaml
task: quality_gate_check
actions:
  - name: ä»£ç è¦†ç›–ç‡æ£€æŸ¥
    threshold:
      statements: ">= 80%"
      branches: ">= 75%"
      functions: ">= 85%"
      lines: ">= 80%"

  - name: ä»£ç è´¨é‡æ£€æŸ¥
    run: "npm run lint"
    threshold:
      errors: 0
      warnings: "<= 10"

  - name: å®‰å…¨æ‰«æ
    run: "npm audit"
    threshold:
      critical: 0
      high: 0

  - name: ç±»å‹æ£€æŸ¥
    run: "npm run type-check"
    threshold:
      errors: 0

  - name: æ„å»ºéªŒè¯
    run: "npm run build"
    threshold:
      success: true
```

---

#### Step 5.6: ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

```yaml
task: generate_reports
outputs:
  - name: test-report.md
    content:
      - æ‰§è¡Œæ‘˜è¦
      - æµ‹è¯•æ‰§è¡Œè¯¦æƒ…
      - ä»£ç è¦†ç›–ç‡
      - éœ€æ±‚è¿½æº¯
      - é—®é¢˜å’Œå»ºè®®

  - name: quality-report.md
    content:
      - è´¨é‡é—¨ç¦ç»“æœ
      - ä»£ç è´¨é‡åˆ†æ
      - å®‰å…¨æ‰«æç»“æœ
      - NFR éªŒè¯ç»“æœ

  - name: traceability-matrix.md
    content:
      - FR â†’ Story â†’ Test æ˜ å°„
      - AC â†’ Test Case æ˜ å°„
      - è¦†ç›–ç‡ç»Ÿè®¡
```

---

**è´¨é‡é—¨ç¦**:
- [ ] æµ‹è¯•è¦†ç›–ç‡ >= 80%
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ (100%)
- [ ] æ— ä¸¥é‡å®‰å…¨æ¼æ´ (0 critical/high)
- [ ] ä»£ç è´¨é‡è¯„åˆ† >= B
- [ ] NFR éªŒè¯é€šè¿‡
- [ ] éœ€æ±‚è¿½æº¯å®Œæ•´ (100%)

---

## é˜»å¡å¤„ç†æœºåˆ¶

å½“æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°é˜»å¡æ—¶ï¼ŒæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§å¤„ç†ï¼š

```yaml
blocking_resolution:
  level_1_knowledge_base:
    description: é¦–å…ˆåœ¨çŸ¥è¯†åº“ä¸­æ£€ç´¢è§£å†³æ–¹æ¡ˆ
    actions:
      - æ‰©å¤§å…³é”®è¯æœç´¢èŒƒå›´
      - æ£€ç´¢ç›¸ä¼¼é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ
      - æŸ¥æ‰¾ç›¸å…³æŠ€æœ¯æ–‡æ¡£

  level_2_inference:
    description: åŸºäºçŸ¥è¯†åº“æ¨æ–­è§£å†³æ–¹æ¡ˆ
    actions:
      - åŸºäºç›¸ä¼¼æ¡ˆä¾‹æ¨æ–­
      - åŸºäºæŠ€æœ¯è§„èŒƒæ¨æ–­
      - åŸºäºæœ€ä½³å®è·µæ¨æ–­

  level_3_default:
    description: ä½¿ç”¨é»˜è®¤ç­–ç•¥ç»§ç»­æ‰§è¡Œ
    actions:
      - é‡‡ç”¨ä¿å®ˆçš„é»˜è®¤å®ç°
      - è®°å½•å†³ç­–ä¾›åç»­å®¡æŸ¥
      - ç»§ç»­æ‰§è¡Œåç»­æ­¥éª¤

  level_4_human:
    description: æ ‡è®°ä¸ºéœ€äººå·¥ä»‹å…¥ï¼ˆæœ€åæ‰‹æ®µï¼‰
    actions:
      - è®°å½•è¯¦ç»†çš„é˜»å¡ä¿¡æ¯
      - æš‚åœå½“å‰ä»»åŠ¡
      - ç»§ç»­æ‰§è¡Œå…¶ä»–æ— ä¾èµ–ä»»åŠ¡
```

---

## çŠ¶æ€è¿½è¸ª

### 1. è¿­ä»£æ‰§è¡ŒçŠ¶æ€ (`auto-iteration-status.yaml`)

æ‰§è¡Œè¿‡ç¨‹ä¸­è‡ªåŠ¨æ›´æ–°è¿­ä»£çº§åˆ«çš„çŠ¶æ€ï¼š

```yaml
# auto-iteration-status.yaml
execution:
  id: "iter-2024-001"
  started_at: "2024-01-15T10:00:00Z"
  status: "in_progress"  # pending | in_progress | completed | blocked

phases:
  phase_1_analyze:
    status: "completed"
    started_at: "2024-01-15T10:00:00Z"
    completed_at: "2024-01-15T10:15:00Z"
    outputs:
      - requirement-analysis.md

  phase_2_plan:
    status: "completed"
    outputs:
      - prd.md
      - epics/epic-001.md

  phase_3_design:
    status: "completed"
    outputs:
      - architecture.md
      - adr/

  phase_4_develop:
    status: "in_progress"
    current_story: "1-2-user-authentication"

  phase_5_test:
    status: "pending"

blocking_issues: []

knowledge_base_queries:
  - query: "ç”¨æˆ·è®¤è¯æœ€ä½³å®è·µ"
    result: "found"
    source: "tech-kb/auth-patterns.md"
```

### 2. Sprint å¼€å‘çŠ¶æ€ (`sprint-status.yaml`)

**ä¸ SM æ™ºèƒ½ä½“å®Œå…¨å…¼å®¹çš„æ ¼å¼**ï¼š

```yaml
# sprint-status.yaml
# ç”± SM æ™ºèƒ½ä½“çš„ sprint-planning å·¥ä½œæµç”Ÿæˆ
# æ ¼å¼ä¸ç°æœ‰é¡¹ç›®æ™ºèƒ½ä½“ç³»ç»Ÿå®Œå…¨ä¸€è‡´

# æ–‡ä»¶å…ƒæ•°æ®
generated: "2024-01-15 10:30"
project: "My Project"
project_key: "PROJ-001"
tracking_system: file-system
story_location: "{sprint_artifacts}"

# STATUS DEFINITIONS (ä¸ SM æ™ºèƒ½ä½“ä¸€è‡´):
# ==================
# Epic Status:
#   - backlog: Epic not yet started
#   - in-progress: Epic actively being worked on
#   - done: All stories in epic completed
#
# Story Status:
#   - backlog: Story only exists in epic file
#   - drafted: Story file created in stories folder
#   - ready-for-dev: Draft approved, ready for development
#   - in-progress: Developer actively working on implementation
#   - review: Implementation complete, ready for review
#   - done: Story completed

# å¼€å‘çŠ¶æ€è¿½è¸ª
development_status:
  # Epic 1
  epic-1: in-progress
  1-1-user-authentication: done
  1-2-account-management: in-progress
  1-3-user-profile: ready-for-dev
  1-4-password-reset: drafted
  1-5-session-management: backlog
  epic-1-retrospective: optional

  # Epic 2
  epic-2: backlog
  2-1-product-catalog: backlog
  2-2-search-functionality: backlog
  2-3-product-details: backlog
  epic-2-retrospective: optional
```

### 3. çŠ¶æ€åŒæ­¥æœºåˆ¶

```yaml
status_sync:
  # Phase 4 å¼€å‘è¿‡ç¨‹ä¸­çš„çŠ¶æ€åŒæ­¥
  on_story_status_change:
    - update: "sprint-status.yaml"
      field: "development_status[story_key]"

    - update: "auto-iteration-status.yaml"
      field: "phases.phase_4_develop.current_story"

  # æ•…äº‹çŠ¶æ€è½¬æ¢è§¦å‘ç‚¹
  transitions:
    backlog_to_drafted:
      trigger: "*create-story å®Œæˆåˆ›å»ºæ•…äº‹æ–‡ä»¶"
      update_sprint_status: true

    drafted_to_ready_for_dev:
      trigger: "*create-story æˆ– *validate-create-story éªŒè¯é€šè¿‡"
      update_sprint_status: true

    ready_for_dev_to_in_progress:
      trigger: "*develop-story Step 4 å¼€å§‹å¼€å‘"
      update_sprint_status: true

    in_progress_to_review:
      trigger: "*develop-story Step 9 æ•…äº‹å®Œæˆ"
      update_sprint_status: true

    review_to_done:
      trigger: "*code-review APPROVED"
      update_sprint_status: true

    review_to_in_progress:
      trigger: "*code-review CHANGES_REQUESTED"
      update_sprint_status: true
      note: "DEV æ™ºèƒ½ä½“ä¼šå¤„ç†å®¡æŸ¥åé¦ˆ"
```

---

## æ‰§è¡Œå®Œæˆ

å½“æ‰€æœ‰é˜¶æ®µå®Œæˆåï¼Œè¾“å‡ºæœ€ç»ˆæŠ¥å‘Šï¼š

```markdown
# è¿­ä»£å¼€å‘æ‰§è¡ŒæŠ¥å‘Š

## æ‰§è¡Œæ‘˜è¦
- **æ‰§è¡Œ ID**: iter-2024-001
- **å¼€å§‹æ—¶é—´**: 2024-01-15 10:00:00
- **å®Œæˆæ—¶é—´**: 2024-01-15 14:30:00
- **æ€»è€—æ—¶**: 4.5 å°æ—¶
- **çŠ¶æ€**: âœ… æˆåŠŸå®Œæˆ

## äº§å‡ºç‰©æ¸…å•
### æ–‡æ¡£
- [ ] requirement-analysis.md
- [ ] prd.md
- [ ] architecture.md
- [ ] test-report.md

### ä»£ç 
- [ ] æ–°å¢æ–‡ä»¶: 12 ä¸ª
- [ ] ä¿®æ”¹æ–‡ä»¶: 8 ä¸ª
- [ ] æµ‹è¯•æ–‡ä»¶: 15 ä¸ª

### æµ‹è¯•ç»“æœ
- å•å…ƒæµ‹è¯•: 45/45 é€šè¿‡
- é›†æˆæµ‹è¯•: 12/12 é€šè¿‡
- è¦†ç›–ç‡: 87%

## çŸ¥è¯†åº“ä½¿ç”¨ç»Ÿè®¡
- ä¸šåŠ¡è§„åˆ™åŒ¹é…: 23 æ¡
- æŠ€æœ¯è§„èŒƒå¼•ç”¨: 15 æ¡
- æ–°å¢çŸ¥è¯†å»ºè®®: 3 æ¡

## åç»­å»ºè®®
1. [å»ºè®®å†…å®¹]
2. [å»ºè®®å†…å®¹]
```
